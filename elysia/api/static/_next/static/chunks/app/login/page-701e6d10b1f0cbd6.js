(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{26070:function(e,t,n){Promise.resolve().then(n.bind(n,86289))},65023:function(e,t,n){"use strict";n.d(t,{T8:function(){return a},Zq:function(){return s},h5:function(){return o},ho:function(){return i},sd:function(){return r}}),n(40257);let i="",o="/static/",r=!0;function a(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?window.location.replace(e):window.location.assign(e)}let s=()=>{{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t,"/ws/")}}},61164:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var i=n(65023);let o={appName:"Athena",logoPath:"".concat(i.h5,"logo.svg"),sidebar:{showGithub:!1,showWeaviatePowered:!0},links:{documentation:"https://weaviate.github.io/elysia/"}}},86289:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d}});var i=n(57437),o=n(33145),r=n(2265),a=n(78582),s=n(61164);let c=new Set(["emulator","entra"]);function l(){let e=function(e){if(!e)return null;let t=e.trim().toLowerCase();return c.has(t)?t:null}("emulator"),t=null!=e?e:null;if(!t)throw Error("Missing auth provider configuration. Set NEXT_PUBLIC_AUTH_PROVIDER (emulator|entra).");return t}function u(){let e="/auth/callback";if(!e.startsWith("/"))throw Error("Invalid NEXT_PUBLIC_OAUTH_REDIRECT_PATH. It must start with '/'.");return e}function d(){let e=(0,a.e)();return(0,r.useEffect)(()=>((async()=>{let t=window.location.hash;if(t&&t.includes("access_token")){let n=new URLSearchParams(t.substring(1)),i=n.get("access_token"),o=n.get("refresh_token");if(i&&o){try{if((await fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({access_token:i,refresh_token:o})})).ok){window.history.replaceState(null,"","/login"),window.location.assign("/");return}}catch(e){console.error("LoginPage: /api/auth/session request failed",e)}let{error:t}=await e.auth.setSession({access_token:i,refresh_token:o});if(!t){window.history.replaceState(null,"","/login"),window.location.assign("/");return}console.error("LoginPage: setSession error",t)}}})(),()=>void 0),[e.auth]),(0,i.jsxs)("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-background p-6",children:[(0,i.jsxs)("div",{className:"mb-8 flex flex-col items-center gap-4",children:[(0,i.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-background_alt flex items-center justify-center border border-border",children:(0,i.jsx)(o.default,{src:s.I.logoPath,alt:s.I.appName,width:48,height:48,className:"w-12 h-12"})}),(0,i.jsx)("h1",{className:"text-4xl font-heading font-bold text-primary shine",children:s.I.appName}),(0,i.jsx)("p",{className:"text-secondary text-lg",children:"Your AI Platform"})]}),(0,i.jsxs)("div",{className:"w-full max-w-md bg-background_alt rounded-xl border border-border p-8 shadow-lg",children:[(0,i.jsxs)("div",{className:"text-center mb-8",children:[(0,i.jsx)("h2",{className:"text-xl font-semibold text-primary mb-2",children:"Benvenuto"}),(0,i.jsx)("p",{className:"text-secondary text-sm",children:"Accedi con il tuo account aziendale per continuare"})]}),(0,i.jsxs)("a",{href:"/api/auth/authorize?provider=azure&scopes=openid%20profile%20email",onClick:t=>{let n=window.location.origin;try{let i=l();if(!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l();return"emulator"===e}(i)){t.preventDefault(),e.auth.signInWithOAuth({provider:"azure",options:{scopes:"openid profile email",redirectTo:"".concat(n).concat(u())}});return}let o=new URLSearchParams({provider:"azure",scopes:"openid profile email",redirect_to:"".concat(n).concat(u())});t.preventDefault(),window.location.assign("/api/auth/authorize?".concat(o.toString()))}catch(e){console.error("LoginPage: OAuth config error, using emulator authorize fallback",e)}},className:"w-full flex items-center justify-center gap-3 bg-[#0078D4] hover:bg-[#006cbd] text-white font-medium py-4 px-6 rounded-lg transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] shadow-lg",children:[(0,i.jsxs)("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 21 21",children:[(0,i.jsx)("rect",{x:"1",y:"1",width:"9",height:"9",fill:"#f25022"}),(0,i.jsx)("rect",{x:"1",y:"11",width:"9",height:"9",fill:"#00a4ef"}),(0,i.jsx)("rect",{x:"11",y:"1",width:"9",height:"9",fill:"#7fba00"}),(0,i.jsx)("rect",{x:"11",y:"11",width:"9",height:"9",fill:"#ffb900"})]}),"Accedi con Microsoft"]}),(0,i.jsx)("p",{className:"mt-6 text-center text-xs text-secondary",children:"Utilizzando questo servizio accetti i termini di utilizzo della piattaforma."})]}),(0,i.jsx)("div",{className:"mt-8 text-xs text-secondary",children:"Powered by Supabase & Entra ID"})]})}},78582:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var i=n(11259);function o(){return(0,i.createBrowserClient)(function(){let e="/supabase";return e.startsWith("/")?"".concat(window.location.origin).concat(e):e}(),"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIiwiaWF0IjoxNzcwODI0OTcwLCJleHAiOjE5Mjg1MDQ5NzB9.hbIOpqCgw-rro9kaZjEQ7T-xZ9qRYvXeS3PmMgq4smw",{cookieOptions:{name:"sb-athena-auth-token"}})}n(40257)}},function(e){e.O(0,[972,145,971,117,744],function(){return e(e.s=26070)}),_N_E=e.O()}]);