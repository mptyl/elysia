(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4520],{16810:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>h});var r=i(95155),a=i(5772),s=i(12115),o=i(45726),n=i(89092);let l=new Set(["emulator","entra"]);function c(){let e=function(e){if(!e)return null;let t=e.trim().toLowerCase();return l.has(t)?t:null}("emulator"),t=e??null;if(!t)throw Error("Missing auth provider configuration. Set NEXT_PUBLIC_AUTH_PROVIDER (emulator|entra).");return t}function d(){let e="/auth/callback";if(!e.startsWith("/"))throw Error("Invalid NEXT_PUBLIC_OAUTH_REDIRECT_PATH. It must start with '/'.");return e}function h(){let e=(0,o.U)();return(0,s.useEffect)(()=>((async()=>{let t=window.location.hash;if(t&&t.includes("access_token")){let i=new URLSearchParams(t.substring(1)),r=i.get("access_token"),a=i.get("refresh_token");if(r&&a){try{if((await fetch("/api/auth/session",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({access_token:r,refresh_token:a})})).ok){window.history.replaceState(null,"","/login"),window.location.assign("/");return}}catch(e){console.error("LoginPage: /api/auth/session request failed",e)}let{error:t}=await e.auth.setSession({access_token:r,refresh_token:a});if(!t){window.history.replaceState(null,"","/login"),window.location.assign("/");return}console.error("LoginPage: setSession error",t)}}})(),()=>void 0),[e.auth]),(0,r.jsxs)("div",{className:"min-h-screen w-full flex flex-col items-center justify-center bg-background p-6",children:[(0,r.jsxs)("div",{className:"mb-8 flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-background_alt flex items-center justify-center border border-border",children:(0,r.jsx)(a.default,{src:n.O.logoPath,alt:n.O.appName,width:48,height:48,className:"w-12 h-12"})}),(0,r.jsx)("h1",{className:"text-4xl font-heading font-bold text-primary shine",children:n.O.appName}),(0,r.jsx)("p",{className:"text-secondary text-lg",children:"Your AI Platform"})]}),(0,r.jsxs)("div",{className:"w-full max-w-md bg-background_alt rounded-xl border border-border p-8 shadow-lg",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-primary mb-2",children:"Benvenuto"}),(0,r.jsx)("p",{className:"text-secondary text-sm",children:"Accedi con il tuo account aziendale per continuare"})]}),(0,r.jsxs)("a",{href:"/api/auth/authorize?provider=azure&scopes=openid%20profile%20email",onClick:t=>{let i=window.location.origin;try{let r=c();if(!function(e=c()){return"emulator"===e}(r)){t.preventDefault(),e.auth.signInWithOAuth({provider:"azure",options:{scopes:"openid profile email",redirectTo:`${i}${d()}`}});return}let a=new URLSearchParams({provider:"azure",scopes:"openid profile email",redirect_to:`${i}${d()}`});t.preventDefault(),window.location.assign(`/api/auth/authorize?${a.toString()}`)}catch(e){console.error("LoginPage: OAuth config error, using emulator authorize fallback",e)}},className:"w-full flex items-center justify-center gap-3 bg-[#0078D4] hover:bg-[#006cbd] text-white font-medium py-4 px-6 rounded-lg transition-all duration-300 hover:scale-[1.02] active:scale-[0.98] shadow-lg",children:[(0,r.jsxs)("svg",{className:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 21 21",children:[(0,r.jsx)("rect",{x:"1",y:"1",width:"9",height:"9",fill:"#f25022"}),(0,r.jsx)("rect",{x:"1",y:"11",width:"9",height:"9",fill:"#00a4ef"}),(0,r.jsx)("rect",{x:"11",y:"1",width:"9",height:"9",fill:"#7fba00"}),(0,r.jsx)("rect",{x:"11",y:"11",width:"9",height:"9",fill:"#ffb900"})]}),"Accedi con Microsoft"]}),(0,r.jsx)("p",{className:"mt-6 text-center text-xs text-secondary",children:"Utilizzando questo servizio accetti i termini di utilizzo della piattaforma."})]}),(0,r.jsx)("div",{className:"mt-8 text-xs text-secondary",children:"Powered by Supabase & Entra ID"})]})}},26939:(e,t,i)=>{"use strict";i.d(t,{Hc:()=>r,VJ:()=>o,aI:()=>s,sS:()=>a,sb:()=>n}),i(41463);let r="",a="/static/",s=!0;function o(e,t=!1){t?window.location.replace(e):window.location.assign(e)}let n=()=>{{let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return`${e}//${t}/ws/`}}},45726:(e,t,i)=>{"use strict";i.d(t,{U:()=>a});var r=i(57716);function a(){let e;return(0,r.createBrowserClient)((e="/supabase").startsWith("/")?`${window.location.origin}${e}`:e,"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlzcyI6InN1cGFiYXNlIiwiaWF0IjoxNzcwODI0OTcwLCJleHAiOjE5Mjg1MDQ5NzB9.hbIOpqCgw-rro9kaZjEQ7T-xZ9qRYvXeS3PmMgq4smw",{cookieOptions:{name:"sb-athena-auth-token"}})}i(41463)},62624:(e,t,i)=>{Promise.resolve().then(i.bind(i,16810))},89092:(e,t,i)=>{"use strict";i.d(t,{O:()=>a});var r=i(26939);let a={appName:"Athena",logoPath:`${r.sS}logo.svg`,sidebar:{showGithub:!1,showWeaviatePowered:!0},links:{documentation:"https://weaviate.github.io/elysia/"}}}},e=>{e.O(0,[7716,5772,8441,3794,7358],()=>e(e.s=62624)),_N_E=e.O()}]);